{"ast":null,"code":"import _defineProperty from\"E:\\\\MERN\\\\project1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"E:\\\\MERN\\\\project1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\MERN\\\\project1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\MERN\\\\project1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\MERN\\\\project1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\MERN\\\\project1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Button,Modal,ModalHeader,ModalBody,Form,FormGroup,Label,NavLink,Input,Alert}from\"reactstrap\";import{connect}from\"react-redux\";import{login}from\"../../actions/authAction\";import{clearErrors}from\"../../actions/errorAction\";var LoginModal=/*#__PURE__*/function(_Component){_inherits(LoginModal,_Component);function LoginModal(){var _getPrototypeOf2;var _this;_classCallCheck(this,LoginModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(LoginModal)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={modal:false,email:\"\",password:\"\",msg:null};_this.toggel=function(){_this.props.clearErrors();_this.setState({modal:!_this.state.modal});};_this.onChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.onSubmit=function(e){e.preventDefault();var _this$state=_this.state,email=_this$state.email,password=_this$state.password;var user={email:email,password:password};//attempt to login\n_this.props.login(user);};return _this;}_createClass(LoginModal,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props=this.props,error=_this$props.error,isAuthenticated=_this$props.isAuthenticated;if(error!==prevProps.error){// check for register error\nif(error.id===\"LOGIN_FAIL\"){this.setState({msg:error.msg.msg});}else{this.setState({msg:null});}}//is authenticated close model\nif(this.state.modal){if(isAuthenticated){this.toggel();}}}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(NavLink,{onClick:this.toggel,href:\"#\"},\"Login\"),React.createElement(Modal,{isOpen:this.state.modal,toggle:this.toggel},React.createElement(ModalHeader,{toggle:this.toggel},\"Login\"),React.createElement(ModalBody,null,this.state.msg?React.createElement(Alert,{color:\"danger\"},this.state.msg):null,React.createElement(Form,{onSubmit:this.onSubmit},React.createElement(FormGroup,null,React.createElement(Label,{for:\"email\"},\"Email\"),React.createElement(Input,{type:\"email\",name:\"email\",id:\"email\",placeholder:\"Email\",onChange:this.onChange,className:\"mb-3\"}),React.createElement(Label,{for:\"password\"},\"Password\"),React.createElement(Input,{type:\"password\",name:\"password\",id:\"password\",placeholder:\"Password\",onChange:this.onChange}),React.createElement(Button,{color:\"dark\",style:{marginTop:\"2rem\"},block:true},\"Login\"))))));}}]);return LoginModal;}(Component);var mapStateToProps=function mapStateToProps(state){return{isAuthenticated:state.auth.isAuthenticated,error:state.error};};export default connect(mapStateToProps,{login:login,clearErrors:clearErrors})(LoginModal);","map":{"version":3,"sources":["E:/MERN/project1/client/src/Component/auth/LoginModal.js"],"names":["React","Component","Button","Modal","ModalHeader","ModalBody","Form","FormGroup","Label","NavLink","Input","Alert","connect","login","clearErrors","LoginModal","state","modal","email","password","msg","toggel","props","setState","onChange","e","target","name","value","onSubmit","preventDefault","user","prevProps","error","isAuthenticated","id","marginTop","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport {\r\n  Button,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  Form,\r\n  FormGroup,\r\n  Label,\r\n  NavLink,\r\n  Input,\r\n  Alert\r\n} from \"reactstrap\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { login } from \"../../actions/authAction\";\r\nimport { clearErrors } from \"../../actions/errorAction\";\r\n\r\nclass LoginModal extends Component {\r\n  state = {\r\n    modal: false,\r\n    email: \"\",\r\n    password: \"\",\r\n    msg: null\r\n  };\r\n\r\n  static propTypes = {\r\n    isAuthenticated: PropTypes.bool,\r\n    error: PropTypes.object.isRequired,\r\n    login: PropTypes.func.isRequired,\r\n    clearErrors: PropTypes.func.isRequired\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { error, isAuthenticated } = this.props;\r\n    if (error !== prevProps.error) {\r\n      // check for register error\r\n      if (error.id === \"LOGIN_FAIL\") {\r\n        this.setState({ msg: error.msg.msg });\r\n      } else {\r\n        this.setState({ msg: null });\r\n      }\r\n    }\r\n\r\n    //is authenticated close model\r\n    if (this.state.modal) {\r\n      if (isAuthenticated) {\r\n        this.toggel();\r\n      }\r\n    }\r\n  }\r\n\r\n  toggel = () => {\r\n    this.props.clearErrors();\r\n    this.setState({\r\n      modal: !this.state.modal\r\n    });\r\n  };\r\n\r\n  onChange = e => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    const { email, password } = this.state;\r\n\r\n    const user = {\r\n      email,\r\n      password\r\n    };\r\n\r\n    //attempt to login\r\n    this.props.login(user);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <NavLink onClick={this.toggel} href=\"#\">\r\n          Login\r\n        </NavLink>\r\n\r\n        <Modal isOpen={this.state.modal} toggle={this.toggel}>\r\n          <ModalHeader toggle={this.toggel}>Login</ModalHeader>\r\n          <ModalBody>\r\n            {this.state.msg ? (\r\n              <Alert color=\"danger\">{this.state.msg}</Alert>\r\n            ) : null}\r\n            <Form onSubmit={this.onSubmit}>\r\n              <FormGroup>\r\n                <Label for=\"email\">Email</Label>\r\n                <Input\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  id=\"email\"\r\n                  placeholder=\"Email\"\r\n                  onChange={this.onChange}\r\n                  className=\"mb-3\"\r\n                />\r\n\r\n                <Label for=\"password\">Password</Label>\r\n                <Input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  id=\"password\"\r\n                  placeholder=\"Password\"\r\n                  onChange={this.onChange}\r\n                />\r\n                <Button color=\"dark\" style={{ marginTop: \"2rem\" }} block>\r\n                  Login\r\n                </Button>\r\n              </FormGroup>\r\n            </Form>\r\n          </ModalBody>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isAuthenticated: state.auth.isAuthenticated,\r\n    error: state.error\r\n  };\r\n};\r\nexport default connect(mapStateToProps, { login, clearErrors })(LoginModal);\r\n"]},"metadata":{},"sourceType":"module"}